{"ast":null,"code":"var _jsxFileName = \"/Users/anjidananto/Projects/ARDemoApps/sizer-app-poc/src/components/Camera.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FilesetResolver, PoseLandmarker, DrawingUtils } from \"@mediapipe/tasks-vision\";\nimport Webcam from \"react-webcam\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CameraComponent = ({\n  onMeasurement,\n  onPoseDetected,\n  isMeasuring,\n  userHeight\n}) => {\n  _s();\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [poseLandmarker, setPoseLandmarker] = useState(null);\n  const [isCorrectPose, setIsCorrectPose] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasSent, setHasSent] = useState(false);\n  const measurementHistoryRef = useRef([]);\n\n  // --- Utility ---\n  const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n  const median = arr => {\n    const sorted = [...arr].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n    return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n  };\n\n  // --- Scale Factor (lebih stabil) ---\n  const getScale = landmarks => {\n    const shoulderToAnklePx = distance(landmarks[11], landmarks[27]);\n    return userHeight / shoulderToAnklePx; // pixel â†’ cm\n  };\n\n  // --- Measurement Calculation ---\n  const calculateMeasurements = landmarks => {\n    const scale = getScale(landmarks);\n    return {\n      chest: (distance(landmarks[11], landmarks[12]) * 2.5 * scale).toFixed(1),\n      // approx chest circumference\n      waist: (distance(landmarks[23], landmarks[24]) * 2.8 * scale).toFixed(1),\n      hips: (distance(landmarks[23], landmarks[24]) * 3.2 * scale).toFixed(1),\n      shoulderWidth: (distance(landmarks[11], landmarks[12]) * scale).toFixed(1),\n      armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n      backLength: (distance({\n        x: (landmarks[11].x + landmarks[12].x) / 2,\n        y: (landmarks[11].y + landmarks[12].y) / 2\n      }, {\n        x: (landmarks[23].x + landmarks[24].x) / 2,\n        y: (landmarks[23].y + landmarks[24].y) / 2\n      }) * scale).toFixed(1),\n      neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n    };\n  };\n\n  // --- Pose Validation ---\n  const validatePose = landmarks => {\n    if (!landmarks || landmarks.length < 32) return false;\n    const leftShoulder = landmarks[11];\n    const rightShoulder = landmarks[12];\n    const leftHip = landmarks[23];\n    const rightHip = landmarks[24];\n    const leftAnkle = landmarks[27];\n    const rightAnkle = landmarks[28];\n\n    // 1. Check full body visible\n    if (!leftAnkle || !rightAnkle) return false;\n\n    // 2. Shoulders & hips level\n    const shoulderLevelDiff = Math.abs(leftShoulder.y - rightShoulder.y);\n    const hipLevelDiff = Math.abs(leftHip.y - rightHip.y);\n\n    // 3. Facing forward (shoulders wider than hips)\n    const facingCamera = distance(leftShoulder, rightShoulder) > distance(leftHip, rightHip) * 0.85;\n\n    // 4. Not rotated (depth check)\n    const depthDiff = Math.abs(leftShoulder.z - rightShoulder.z);\n    const valid = shoulderLevelDiff < 0.03 && hipLevelDiff < 0.03 && facingCamera && depthDiff < 0.05;\n    setIsCorrectPose(valid);\n    return valid;\n  };\n\n  // --- Smoothing ---\n  const smoothMeasurements = newData => {\n    measurementHistoryRef.current.push(newData);\n    if (measurementHistoryRef.current.length > 15) {\n      measurementHistoryRef.current.shift();\n    }\n    const keys = Object.keys(newData);\n    const smoothed = {};\n    keys.forEach(k => {\n      smoothed[k] = median(measurementHistoryRef.current.map(m => parseFloat(m[k]))).toFixed(1);\n    });\n    return smoothed;\n  };\n\n  // Load Mediapipe Model\n  useEffect(() => {\n    const init = async () => {\n      setIsLoading(true);\n      const vision = await FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\");\n      const landmarker = await PoseLandmarker.createFromOptions(vision, {\n        baseOptions: {\n          modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_full/float16/latest/pose_landmarker_full.task\",\n          delegate: \"GPU\"\n        },\n        runningMode: \"VIDEO\",\n        numPoses: 1\n      });\n      setPoseLandmarker(landmarker);\n      setIsLoading(false);\n    };\n    init();\n  }, []);\n\n  // Detection Loop\n  useEffect(() => {\n    let animationFrame;\n    const runDetection = async () => {\n      if (!webcamRef.current || !poseLandmarker) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n      const video = webcamRef.current.video;\n      if (video.readyState !== 4) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // no ghosting\n\n      const result = poseLandmarker.detectForVideo(video, performance.now());\n      if (result.landmarks.length > 0) {\n        const landmarks = result.landmarks[0];\n        onPoseDetected(landmarks);\n\n        // Draw key landmarks only\n        const drawingUtils = new DrawingUtils(ctx);\n        const KEYPOINTS = [0, 11, 12, 13, 14, 15, 16, 23, 24, 25, 26, 27, 28];\n        drawingUtils.drawLandmarks(landmarks.filter((_, i) => KEYPOINTS.includes(i)), {\n          color: isCorrectPose ? \"#00FF00\" : \"#FF0000\",\n          radius: 4\n        });\n\n        // If pose is valid & measuring\n        if (validatePose(landmarks) && isMeasuring && !hasSent) {\n          const rawMeasurements = calculateMeasurements(landmarks);\n          const smoothed = smoothMeasurements(rawMeasurements);\n          if (measurementHistoryRef.current.length >= 10) {\n            console.log(\"Final Measurements:\", smoothed);\n            onMeasurement(smoothed);\n            setHasSent(true);\n          }\n        }\n      }\n      animationFrame = requestAnimationFrame(runDetection);\n    };\n    if (poseLandmarker) {\n      animationFrame = requestAnimationFrame(runDetection);\n    }\n    return () => cancelAnimationFrame(animationFrame);\n  }, [poseLandmarker, isMeasuring, isCorrectPose, hasSent]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Webcam, {\n      ref: webcamRef,\n      mirrored: true,\n      style: {\n        width: \"100%\",\n        zIndex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.6)\",\n        color: \"#fff\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        zIndex: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading model...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraComponent, \"oyFTklKS0C2fQhFv+VMGkisPBQc=\");\n_c = CameraComponent;\nexport default CameraComponent;\nvar _c;\n$RefreshReg$(_c, \"CameraComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","FilesetResolver","PoseLandmarker","DrawingUtils","Webcam","jsxDEV","_jsxDEV","CameraComponent","onMeasurement","onPoseDetected","isMeasuring","userHeight","_s","webcamRef","canvasRef","poseLandmarker","setPoseLandmarker","isCorrectPose","setIsCorrectPose","isLoading","setIsLoading","hasSent","setHasSent","measurementHistoryRef","distance","a","b","Math","sqrt","pow","x","y","median","arr","sorted","sort","mid","floor","length","getScale","landmarks","shoulderToAnklePx","calculateMeasurements","scale","chest","toFixed","waist","hips","shoulderWidth","armLength","backLength","neck","validatePose","leftShoulder","rightShoulder","leftHip","rightHip","leftAnkle","rightAnkle","shoulderLevelDiff","abs","hipLevelDiff","facingCamera","depthDiff","z","valid","smoothMeasurements","newData","current","push","shift","keys","Object","smoothed","forEach","k","map","m","parseFloat","init","vision","forVisionTasks","landmarker","createFromOptions","baseOptions","modelAssetPath","delegate","runningMode","numPoses","animationFrame","runDetection","requestAnimationFrame","video","readyState","canvas","ctx","getContext","width","videoWidth","height","videoHeight","clearRect","result","detectForVideo","performance","now","drawingUtils","KEYPOINTS","drawLandmarks","filter","_","i","includes","color","radius","rawMeasurements","console","log","cancelAnimationFrame","style","position","children","ref","mirrored","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","top","left","background","display","justifyContent","alignItems","_c","$RefreshReg$"],"sources":["/Users/anjidananto/Projects/ARDemoApps/sizer-app-poc/src/components/Camera.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { FilesetResolver, PoseLandmarker, DrawingUtils } from \"@mediapipe/tasks-vision\";\nimport Webcam from \"react-webcam\";\n\nconst CameraComponent = ({ onMeasurement, onPoseDetected, isMeasuring, userHeight }) => {\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [poseLandmarker, setPoseLandmarker] = useState(null);\n  const [isCorrectPose, setIsCorrectPose] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasSent, setHasSent] = useState(false);\n  const measurementHistoryRef = useRef([]);\n\n  // --- Utility ---\n  const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n  const median = (arr) => {\n    const sorted = [...arr].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n    return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n  };\n\n  // --- Scale Factor (lebih stabil) ---\n  const getScale = (landmarks) => {\n    const shoulderToAnklePx = distance(landmarks[11], landmarks[27]);\n    return userHeight / shoulderToAnklePx; // pixel â†’ cm\n  };\n\n  // --- Measurement Calculation ---\n  const calculateMeasurements = (landmarks) => {\n    const scale = getScale(landmarks);\n    return {\n      chest: (distance(landmarks[11], landmarks[12]) * 2.5 * scale).toFixed(1), // approx chest circumference\n      waist: (distance(landmarks[23], landmarks[24]) * 2.8 * scale).toFixed(1),\n      hips: (distance(landmarks[23], landmarks[24]) * 3.2 * scale).toFixed(1),\n      shoulderWidth: (distance(landmarks[11], landmarks[12]) * scale).toFixed(1),\n      armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n      backLength: (distance(\n        { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2 },\n        { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2 }\n      ) * scale).toFixed(1),\n      neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n    };\n  };\n\n  // --- Pose Validation ---\n  const validatePose = (landmarks) => {\n    if (!landmarks || landmarks.length < 32) return false;\n\n    const leftShoulder = landmarks[11];\n    const rightShoulder = landmarks[12];\n    const leftHip = landmarks[23];\n    const rightHip = landmarks[24];\n    const leftAnkle = landmarks[27];\n    const rightAnkle = landmarks[28];\n\n    // 1. Check full body visible\n    if (!leftAnkle || !rightAnkle) return false;\n\n    // 2. Shoulders & hips level\n    const shoulderLevelDiff = Math.abs(leftShoulder.y - rightShoulder.y);\n    const hipLevelDiff = Math.abs(leftHip.y - rightHip.y);\n\n    // 3. Facing forward (shoulders wider than hips)\n    const facingCamera = distance(leftShoulder, rightShoulder) > distance(leftHip, rightHip) * 0.85;\n\n    // 4. Not rotated (depth check)\n    const depthDiff = Math.abs(leftShoulder.z - rightShoulder.z);\n\n    const valid = shoulderLevelDiff < 0.03 && hipLevelDiff < 0.03 && facingCamera && depthDiff < 0.05;\n    setIsCorrectPose(valid);\n    return valid;\n  };\n\n  // --- Smoothing ---\n  const smoothMeasurements = (newData) => {\n    measurementHistoryRef.current.push(newData);\n    if (measurementHistoryRef.current.length > 15) {\n      measurementHistoryRef.current.shift();\n    }\n    const keys = Object.keys(newData);\n    const smoothed = {};\n    keys.forEach((k) => {\n      smoothed[k] = median(measurementHistoryRef.current.map((m) => parseFloat(m[k]))).toFixed(1);\n    });\n    return smoothed;\n  };\n\n  // Load Mediapipe Model\n  useEffect(() => {\n    const init = async () => {\n      setIsLoading(true);\n      const vision = await FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\");\n      const landmarker = await PoseLandmarker.createFromOptions(vision, {\n        baseOptions: {\n          modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_full/float16/latest/pose_landmarker_full.task\",\n          delegate: \"GPU\",\n        },\n        runningMode: \"VIDEO\",\n        numPoses: 1,\n      });\n      setPoseLandmarker(landmarker);\n      setIsLoading(false);\n    };\n    init();\n  }, []);\n\n  // Detection Loop\n  useEffect(() => {\n    let animationFrame;\n    const runDetection = async () => {\n      if (!webcamRef.current || !poseLandmarker) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n\n      const video = webcamRef.current.video;\n      if (video.readyState !== 4) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // no ghosting\n\n      const result = poseLandmarker.detectForVideo(video, performance.now());\n      if (result.landmarks.length > 0) {\n        const landmarks = result.landmarks[0];\n        onPoseDetected(landmarks);\n\n        // Draw key landmarks only\n        const drawingUtils = new DrawingUtils(ctx);\n        const KEYPOINTS = [0, 11, 12, 13, 14, 15, 16, 23, 24, 25, 26, 27, 28];\n        drawingUtils.drawLandmarks(\n          landmarks.filter((_, i) => KEYPOINTS.includes(i)),\n          { color: isCorrectPose ? \"#00FF00\" : \"#FF0000\", radius: 4 }\n        );\n\n        // If pose is valid & measuring\n        if (validatePose(landmarks) && isMeasuring && !hasSent) {\n          const rawMeasurements = calculateMeasurements(landmarks);\n          const smoothed = smoothMeasurements(rawMeasurements);\n          if (measurementHistoryRef.current.length >= 10) {\n            console.log(\"Final Measurements:\", smoothed);\n            onMeasurement(smoothed);\n            setHasSent(true);\n          }\n        }\n      }\n\n      animationFrame = requestAnimationFrame(runDetection);\n    };\n\n    if (poseLandmarker) {\n      animationFrame = requestAnimationFrame(runDetection);\n    }\n    return () => cancelAnimationFrame(animationFrame);\n  }, [poseLandmarker, isMeasuring, isCorrectPose, hasSent]);\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Webcam ref={webcamRef} mirrored style={{ width: \"100%\", zIndex: 1 }} />\n      <canvas ref={canvasRef} style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", zIndex: 2 }} />\n      {isLoading && (\n        <div style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", background: \"rgba(0,0,0,0.6)\", color: \"#fff\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 3 }}>\n          <p>Loading model...</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CameraComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}