{"ast":null,"code":"var _jsxFileName = \"/Users/anjidananto/Projects/ARDemoApps/sizer-app-poc/src/components/Camera.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FilesetResolver, PoseLandmarker, DrawingUtils } from \"@mediapipe/tasks-vision\";\nimport Webcam from \"react-webcam\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MIN_BODY_FILL = 0.75; // minimal tinggi frame terisi tubuh\nconst KEYPOINTS = [0, 7, 8, 11, 12, 13, 14, 15, 16, 23, 24, 25, 26, 27, 28]; // Filter titik penting\n\nconst CameraComponent = ({\n  onMeasurement,\n  onPoseDetected,\n  userHeight,\n  userWeight\n}) => {\n  _s();\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [poseLandmarker, setPoseLandmarker] = useState(null);\n  const [isCorrectPose, setIsCorrectPose] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasSent, setHasSent] = useState(false);\n  const [poseTimer, setPoseTimer] = useState(0);\n  const [isMeasuring, setIsMeasuring] = useState(false);\n  const [poseMessage, setPoseMessage] = useState(\"\");\n  const measurementHistoryRef = useRef([]);\n\n  /** Utility */\n  // Old code\n  // const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n\n  // New Code\n  const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2) + Math.pow(a.z - b.z, 2));\n  const median = arr => {\n    const sorted = [...arr].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n    return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n  };\n\n  /** Confidence Filter */\n  const filterLowConfidence = (landmarks, minConfidence = 0.6) => {\n    return landmarks.every(p => p.presence > minConfidence);\n  };\n\n  /** Scale Factor (multi-point reference) */\n  // old code\n  // const getScale = (landmarks) => {\n  //   const nose = landmarks[0];\n  //   const leftAnkle = landmarks[27];\n  //   const rightAnkle = landmarks[28];\n  //   const midAnkle = { x: (leftAnkle.x + rightAnkle.x) / 2, y: (leftAnkle.y + rightAnkle.y) / 2 };\n\n  //   const midShoulder = { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2 };\n  //   const midHip = { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2 };\n\n  //   const headToAnkle = distance(nose, midAnkle);\n  //   const shoulderToAnkle = distance(midShoulder, midAnkle);\n  //   const hipToAnkle = distance(midHip, midAnkle);\n\n  //   const avgPixelHeight = (headToAnkle + shoulderToAnkle + hipToAnkle) / 3;\n  //   return userHeight / avgPixelHeight;\n  // };\n\n  // new code\n  const getScale = landmarks => {\n    const nose = landmarks[0];\n    const leftAnkle = landmarks[27];\n    const rightAnkle = landmarks[28];\n    const midAnkle = {\n      x: (leftAnkle.x + rightAnkle.x) / 2,\n      y: (leftAnkle.y + rightAnkle.y) / 2,\n      z: (leftAnkle.z + rightAnkle.z) / 2\n    };\n    const headToAnkle = distance(nose, midAnkle);\n\n    // Tinggi asli user (dalam cm)\n    const scale = userHeight / headToAnkle;\n    return scale;\n  };\n\n  /** Measurement Calculation */\n  // old code\n  // const calculateMeasurements = (landmarks) => {\n  //   const scale = getScale(landmarks);\n  //   const bmi = userWeight && userHeight ? userWeight / Math.pow(userHeight / 100, 2) : 22;\n  //   let adjustmentFactor = 1;\n\n  //   if (bmi > 27) adjustmentFactor = 1.07;\n  //   else if (bmi < 18.5) adjustmentFactor = 0.95;\n\n  //   return {\n  //     chest: ((distance(landmarks[11], landmarks[12]) * 2.5 * scale) * adjustmentFactor).toFixed(1),\n  //     waist: ((distance(landmarks[23], landmarks[24]) * 2.8 * scale) * adjustmentFactor).toFixed(1),\n  //     hips: ((distance(landmarks[23], landmarks[24]) * 3.2 * scale) * adjustmentFactor).toFixed(1),\n  //     shoulderWidth: (distance(landmarks[11], landmarks[12]) * scale).toFixed(1),\n  //     armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n  //     backLength: (distance(\n  //       { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2 },\n  //       { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2 }\n  //     ) * scale).toFixed(1),\n  //     neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n  //   };\n  // };\n\n  // new code\n  const calculateMeasurements = landmarks => {\n    const scale = getScale(landmarks);\n    const bmi = userWeight && userHeight ? userWeight / Math.pow(userHeight / 100, 2) : 22;\n    let adjustmentFactor = 1;\n    if (bmi > 27) adjustmentFactor = 1.08;else if (bmi < 18.5) adjustmentFactor = 0.95;\n    const shoulderWidth3D = distance(landmarks[11], landmarks[12]);\n    const hipWidth3D = distance(landmarks[23], landmarks[24]);\n    const chest = shoulderWidth3D * 2.6 * scale * adjustmentFactor;\n    const waist = hipWidth3D * 2.9 * scale * adjustmentFactor;\n    const hips = hipWidth3D * 3.2 * scale * adjustmentFactor;\n    return {\n      chest: chest.toFixed(1),\n      waist: waist.toFixed(1),\n      hips: hips.toFixed(1),\n      shoulderWidth: (shoulderWidth3D * scale).toFixed(1),\n      armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n      backLength: (distance({\n        x: (landmarks[11].x + landmarks[12].x) / 2,\n        y: (landmarks[11].y + landmarks[12].y) / 2,\n        z: (landmarks[11].z + landmarks[12].z) / 2\n      }, {\n        x: (landmarks[23].x + landmarks[24].x) / 2,\n        y: (landmarks[23].y + landmarks[24].y) / 2,\n        z: (landmarks[23].z + landmarks[24].z) / 2\n      }) * scale).toFixed(1),\n      neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n    };\n  };\n\n  /** Pose Validation */\n  const validatePose = landmarks => {\n    if (!landmarks || landmarks.length < 32) return false;\n    const [leftShoulder, rightShoulder] = [landmarks[11], landmarks[12]];\n    const [leftHip, rightHip] = [landmarks[23], landmarks[24]];\n    const [leftAnkle, rightAnkle] = [landmarks[27], landmarks[28]];\n    const nose = landmarks[0];\n    if (!nose || !leftAnkle || !rightAnkle) {\n      setPoseMessage(\"Pastikan seluruh tubuh terlihat di kamera\");\n      return false;\n    }\n    const ys = landmarks.map(p => p.y);\n    const minY = Math.min(...ys);\n    const maxY = Math.max(...ys);\n    const bodyHeight = maxY - minY;\n    if (bodyHeight < MIN_BODY_FILL) {\n      setPoseMessage(\"Mundur sedikit agar seluruh tubuh terlihat\");\n      return false;\n    }\n    const shoulderLevelDiff = Math.abs(leftShoulder.y - rightShoulder.y);\n    const hipLevelDiff = Math.abs(leftHip.y - rightHip.y);\n    const facingCamera = distance(leftShoulder, rightShoulder) > distance(leftHip, rightHip) * 0.85;\n    const depthDiff = Math.abs(leftShoulder.z - rightShoulder.z);\n    const valid = shoulderLevelDiff < 0.03 && hipLevelDiff < 0.03 && facingCamera && depthDiff < 0.05;\n    setIsCorrectPose(valid);\n    setPoseMessage(valid ? \"\" : \"Posisikan tubuh tegak menghadap kamera.\");\n    return valid;\n  };\n\n  /** Smoothing */\n  const smoothMeasurements = newData => {\n    measurementHistoryRef.current.push(newData);\n    if (measurementHistoryRef.current.length > 15) {\n      measurementHistoryRef.current.shift();\n    }\n    const keys = Object.keys(newData);\n    const smoothed = {};\n    keys.forEach(k => {\n      smoothed[k] = median(measurementHistoryRef.current.map(m => parseFloat(m[k]))).toFixed(1);\n    });\n    return smoothed;\n  };\n\n  /** Load Mediapipe */\n  useEffect(() => {\n    const init = async () => {\n      setIsLoading(true);\n      const vision = await FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\");\n      const landmarker = await PoseLandmarker.createFromOptions(vision, {\n        baseOptions: {\n          modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_full/float16/latest/pose_landmarker_full.task\",\n          delegate: \"GPU\"\n        },\n        runningMode: \"VIDEO\",\n        numPoses: 1\n      });\n      setPoseLandmarker(landmarker);\n      setIsLoading(false);\n    };\n    init();\n  }, []);\n\n  /** Auto Start Measurement after 5 sec valid pose */\n  useEffect(() => {\n    let timer;\n    if (isCorrectPose && !isMeasuring) {\n      timer = setInterval(() => {\n        setPoseTimer(prev => {\n          if (prev >= 4) {\n            setIsMeasuring(true);\n            clearInterval(timer);\n            return 5;\n          }\n          return prev + 1;\n        });\n      }, 1000);\n    } else {\n      setPoseTimer(0);\n    }\n    return () => clearInterval(timer);\n  }, [isCorrectPose, isMeasuring]);\n\n  /** Detection Loop */\n  useEffect(() => {\n    let animationFrame;\n    const runDetection = async () => {\n      if (!webcamRef.current || !poseLandmarker) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n      const video = webcamRef.current.video;\n      if (video.readyState !== 4) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      const result = poseLandmarker.detectForVideo(video, performance.now());\n      if (result.landmarks.length > 0) {\n        const landmarks = result.landmarks[0];\n\n        // âœ… Skip jika confidence rendah\n        if (!filterLowConfidence(landmarks)) {\n          console.log(\"Confidence rendah, frame di-skip\");\n          animationFrame = requestAnimationFrame(runDetection);\n          return;\n        }\n        const valid = validatePose(landmarks);\n        onPoseDetected(landmarks, valid);\n        const drawingUtils = new DrawingUtils(ctx);\n        drawingUtils.drawLandmarks(landmarks.filter((_, i) => KEYPOINTS.includes(i)), {\n          color: isCorrectPose ? \"#00FF00\" : \"#FF0000\",\n          radius: 5\n        });\n        if (valid && isMeasuring && !hasSent) {\n          const rawMeasurements = calculateMeasurements(landmarks);\n          const smoothed = smoothMeasurements(rawMeasurements);\n          if (measurementHistoryRef.current.length >= 10) {\n            console.log(\"Final Measurements:\", smoothed);\n            onMeasurement(smoothed);\n            setHasSent(true);\n          }\n        }\n      }\n      animationFrame = requestAnimationFrame(runDetection);\n    };\n    if (poseLandmarker) {\n      animationFrame = requestAnimationFrame(runDetection);\n    }\n    return () => cancelAnimationFrame(animationFrame);\n  }, [poseLandmarker, isMeasuring, isCorrectPose, hasSent]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Webcam, {\n      ref: webcamRef,\n      mirrored: true,\n      style: {\n        width: \"100%\",\n        zIndex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: 2\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.6)\",\n        color: \"#fff\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        zIndex: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading model...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this), poseMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        bottom: 10,\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        background: \"rgba(0,0,0,0.8)\",\n        color: \"#fff\",\n        padding: \"10px 15px\",\n        borderRadius: \"8px\",\n        fontSize: \"16px\"\n      },\n      children: poseMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }, this), isCorrectPose && !isMeasuring && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        bottom: 50,\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        background: \"#000\",\n        color: \"#fff\",\n        padding: \"8px 12px\",\n        borderRadius: \"8px\",\n        fontSize: \"16px\"\n      },\n      children: [\"Pose valid! Pengukuran dimulai dalam \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: 5 - poseTimer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 48\n      }, this), \" detik...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraComponent, \"McPdzHTQTs+N3je//TKvDgbsyyU=\");\n_c = CameraComponent;\nexport default CameraComponent;\nvar _c;\n$RefreshReg$(_c, \"CameraComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","FilesetResolver","PoseLandmarker","DrawingUtils","Webcam","jsxDEV","_jsxDEV","MIN_BODY_FILL","KEYPOINTS","CameraComponent","onMeasurement","onPoseDetected","userHeight","userWeight","_s","webcamRef","canvasRef","poseLandmarker","setPoseLandmarker","isCorrectPose","setIsCorrectPose","isLoading","setIsLoading","hasSent","setHasSent","poseTimer","setPoseTimer","isMeasuring","setIsMeasuring","poseMessage","setPoseMessage","measurementHistoryRef","distance","a","b","Math","sqrt","pow","x","y","z","median","arr","sorted","sort","mid","floor","length","filterLowConfidence","landmarks","minConfidence","every","p","presence","getScale","nose","leftAnkle","rightAnkle","midAnkle","headToAnkle","scale","calculateMeasurements","bmi","adjustmentFactor","shoulderWidth3D","hipWidth3D","chest","waist","hips","toFixed","shoulderWidth","armLength","backLength","neck","validatePose","leftShoulder","rightShoulder","leftHip","rightHip","ys","map","minY","min","maxY","max","bodyHeight","shoulderLevelDiff","abs","hipLevelDiff","facingCamera","depthDiff","valid","smoothMeasurements","newData","current","push","shift","keys","Object","smoothed","forEach","k","m","parseFloat","init","vision","forVisionTasks","landmarker","createFromOptions","baseOptions","modelAssetPath","delegate","runningMode","numPoses","timer","setInterval","prev","clearInterval","animationFrame","runDetection","requestAnimationFrame","video","readyState","canvas","ctx","getContext","width","videoWidth","height","videoHeight","clearRect","result","detectForVideo","performance","now","console","log","drawingUtils","drawLandmarks","filter","_","i","includes","color","radius","rawMeasurements","cancelAnimationFrame","style","position","children","ref","mirrored","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","top","left","background","display","justifyContent","alignItems","bottom","transform","padding","borderRadius","fontSize","_c","$RefreshReg$"],"sources":["/Users/anjidananto/Projects/ARDemoApps/sizer-app-poc/src/components/Camera.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { FilesetResolver, PoseLandmarker, DrawingUtils } from \"@mediapipe/tasks-vision\";\nimport Webcam from \"react-webcam\";\n\nconst MIN_BODY_FILL = 0.75; // minimal tinggi frame terisi tubuh\nconst KEYPOINTS = [0, 7, 8, 11, 12, 13, 14, 15, 16, 23, 24, 25, 26, 27, 28]; // Filter titik penting\n\nconst CameraComponent = ({ onMeasurement, onPoseDetected, userHeight, userWeight }) => {\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [poseLandmarker, setPoseLandmarker] = useState(null);\n  const [isCorrectPose, setIsCorrectPose] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasSent, setHasSent] = useState(false);\n  const [poseTimer, setPoseTimer] = useState(0);\n  const [isMeasuring, setIsMeasuring] = useState(false);\n  const [poseMessage, setPoseMessage] = useState(\"\");\n  const measurementHistoryRef = useRef([]);\n\n  /** Utility */\n  // Old code\n  // const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n\n  // New Code\n  const distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2) + Math.pow(a.z - b.z, 2));\n\n  const median = (arr) => {\n    const sorted = [...arr].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n    return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n  };\n\n  /** Confidence Filter */\n  const filterLowConfidence = (landmarks, minConfidence = 0.6) => {\n    return landmarks.every(p => p.presence > minConfidence);\n  };\n\n  /** Scale Factor (multi-point reference) */\n  // old code\n  // const getScale = (landmarks) => {\n  //   const nose = landmarks[0];\n  //   const leftAnkle = landmarks[27];\n  //   const rightAnkle = landmarks[28];\n  //   const midAnkle = { x: (leftAnkle.x + rightAnkle.x) / 2, y: (leftAnkle.y + rightAnkle.y) / 2 };\n\n  //   const midShoulder = { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2 };\n  //   const midHip = { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2 };\n\n  //   const headToAnkle = distance(nose, midAnkle);\n  //   const shoulderToAnkle = distance(midShoulder, midAnkle);\n  //   const hipToAnkle = distance(midHip, midAnkle);\n\n  //   const avgPixelHeight = (headToAnkle + shoulderToAnkle + hipToAnkle) / 3;\n  //   return userHeight / avgPixelHeight;\n  // };\n\n  // new code\n  const getScale = (landmarks) => {\n    const nose = landmarks[0];\n    const leftAnkle = landmarks[27];\n    const rightAnkle = landmarks[28];\n    const midAnkle = { \n      x: (leftAnkle.x + rightAnkle.x) / 2, \n      y: (leftAnkle.y + rightAnkle.y) / 2, \n      z: (leftAnkle.z + rightAnkle.z) / 2 \n    };\n\n    const headToAnkle = distance(nose, midAnkle);\n\n    // Tinggi asli user (dalam cm)\n    const scale = userHeight / headToAnkle;\n    return scale;\n  };\n\n\n  /** Measurement Calculation */\n  // old code\n  // const calculateMeasurements = (landmarks) => {\n  //   const scale = getScale(landmarks);\n  //   const bmi = userWeight && userHeight ? userWeight / Math.pow(userHeight / 100, 2) : 22;\n  //   let adjustmentFactor = 1;\n\n  //   if (bmi > 27) adjustmentFactor = 1.07;\n  //   else if (bmi < 18.5) adjustmentFactor = 0.95;\n\n  //   return {\n  //     chest: ((distance(landmarks[11], landmarks[12]) * 2.5 * scale) * adjustmentFactor).toFixed(1),\n  //     waist: ((distance(landmarks[23], landmarks[24]) * 2.8 * scale) * adjustmentFactor).toFixed(1),\n  //     hips: ((distance(landmarks[23], landmarks[24]) * 3.2 * scale) * adjustmentFactor).toFixed(1),\n  //     shoulderWidth: (distance(landmarks[11], landmarks[12]) * scale).toFixed(1),\n  //     armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n  //     backLength: (distance(\n  //       { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2 },\n  //       { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2 }\n  //     ) * scale).toFixed(1),\n  //     neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n  //   };\n  // };\n\n  // new code\n  const calculateMeasurements = (landmarks) => {\n    const scale = getScale(landmarks);\n    const bmi = userWeight && userHeight ? userWeight / Math.pow(userHeight / 100, 2) : 22;\n    let adjustmentFactor = 1;\n\n    if (bmi > 27) adjustmentFactor = 1.08;\n    else if (bmi < 18.5) adjustmentFactor = 0.95;\n\n    const shoulderWidth3D = distance(landmarks[11], landmarks[12]);\n    const hipWidth3D = distance(landmarks[23], landmarks[24]);\n\n    const chest = (shoulderWidth3D * 2.6 * scale) * adjustmentFactor;\n    const waist = (hipWidth3D * 2.9 * scale) * adjustmentFactor;\n    const hips = (hipWidth3D * 3.2 * scale) * adjustmentFactor;\n\n    return {\n      chest: chest.toFixed(1),\n      waist: waist.toFixed(1),\n      hips: hips.toFixed(1),\n      shoulderWidth: (shoulderWidth3D * scale).toFixed(1),\n      armLength: ((distance(landmarks[11], landmarks[13]) + distance(landmarks[13], landmarks[15])) * scale).toFixed(1),\n      backLength: (distance(\n        { x: (landmarks[11].x + landmarks[12].x) / 2, y: (landmarks[11].y + landmarks[12].y) / 2, z: (landmarks[11].z + landmarks[12].z) / 2 },\n        { x: (landmarks[23].x + landmarks[24].x) / 2, y: (landmarks[23].y + landmarks[24].y) / 2, z: (landmarks[23].z + landmarks[24].z) / 2 }\n      ) * scale).toFixed(1),\n      neck: (distance(landmarks[7], landmarks[8]) * 2.5 * scale).toFixed(1)\n    };\n  };\n\n  /** Pose Validation */\n  const validatePose = (landmarks) => {\n    if (!landmarks || landmarks.length < 32) return false;\n\n    const [leftShoulder, rightShoulder] = [landmarks[11], landmarks[12]];\n    const [leftHip, rightHip] = [landmarks[23], landmarks[24]];\n    const [leftAnkle, rightAnkle] = [landmarks[27], landmarks[28]];\n    const nose = landmarks[0];\n\n    if (!nose || !leftAnkle || !rightAnkle) {\n      setPoseMessage(\"Pastikan seluruh tubuh terlihat di kamera\");\n      return false;\n    }\n\n    const ys = landmarks.map(p => p.y);\n    const minY = Math.min(...ys);\n    const maxY = Math.max(...ys);\n    const bodyHeight = maxY - minY;\n    if (bodyHeight < MIN_BODY_FILL) {\n      setPoseMessage(\"Mundur sedikit agar seluruh tubuh terlihat\");\n      return false;\n    }\n\n    const shoulderLevelDiff = Math.abs(leftShoulder.y - rightShoulder.y);\n    const hipLevelDiff = Math.abs(leftHip.y - rightHip.y);\n    const facingCamera = distance(leftShoulder, rightShoulder) > distance(leftHip, rightHip) * 0.85;\n    const depthDiff = Math.abs(leftShoulder.z - rightShoulder.z);\n\n    const valid = shoulderLevelDiff < 0.03 && hipLevelDiff < 0.03 && facingCamera && depthDiff < 0.05;\n    setIsCorrectPose(valid);\n    setPoseMessage(valid ? \"\" : \"Posisikan tubuh tegak menghadap kamera.\");\n    return valid;\n  };\n\n  /** Smoothing */\n  const smoothMeasurements = (newData) => {\n    measurementHistoryRef.current.push(newData);\n    if (measurementHistoryRef.current.length > 15) {\n      measurementHistoryRef.current.shift();\n    }\n    const keys = Object.keys(newData);\n    const smoothed = {};\n    keys.forEach((k) => {\n      smoothed[k] = median(measurementHistoryRef.current.map((m) => parseFloat(m[k]))).toFixed(1);\n    });\n    return smoothed;\n  };\n\n  /** Load Mediapipe */\n  useEffect(() => {\n    const init = async () => {\n      setIsLoading(true);\n      const vision = await FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\");\n      const landmarker = await PoseLandmarker.createFromOptions(vision, {\n        baseOptions: {\n          modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_full/float16/latest/pose_landmarker_full.task\",\n          delegate: \"GPU\",\n        },\n        runningMode: \"VIDEO\",\n        numPoses: 1,\n      });\n      setPoseLandmarker(landmarker);\n      setIsLoading(false);\n    };\n    init();\n  }, []);\n\n  /** Auto Start Measurement after 5 sec valid pose */\n  useEffect(() => {\n    let timer;\n    if (isCorrectPose && !isMeasuring) {\n      timer = setInterval(() => {\n        setPoseTimer((prev) => {\n          if (prev >= 4) {\n            setIsMeasuring(true);\n            clearInterval(timer);\n            return 5;\n          }\n          return prev + 1;\n        });\n      }, 1000);\n    } else {\n      setPoseTimer(0);\n    }\n    return () => clearInterval(timer);\n  }, [isCorrectPose, isMeasuring]);\n\n  /** Detection Loop */\n  useEffect(() => {\n    let animationFrame;\n    const runDetection = async () => {\n      if (!webcamRef.current || !poseLandmarker) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n\n      const video = webcamRef.current.video;\n      if (video.readyState !== 4) {\n        animationFrame = requestAnimationFrame(runDetection);\n        return;\n      }\n\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      const result = poseLandmarker.detectForVideo(video, performance.now());\n      if (result.landmarks.length > 0) {\n         const landmarks = result.landmarks[0];\n\n        // âœ… Skip jika confidence rendah\n        if (!filterLowConfidence(landmarks)) {\n          console.log(\"Confidence rendah, frame di-skip\");\n          animationFrame = requestAnimationFrame(runDetection);\n          return;\n        }\n\n        const valid = validatePose(landmarks);\n        onPoseDetected(landmarks, valid);\n\n        const drawingUtils = new DrawingUtils(ctx);\n        drawingUtils.drawLandmarks(\n          landmarks.filter((_, i) => KEYPOINTS.includes(i)),\n          { color: isCorrectPose ? \"#00FF00\" : \"#FF0000\", radius: 5 }\n        );\n\n        if (valid && isMeasuring && !hasSent) {\n          const rawMeasurements = calculateMeasurements(landmarks);\n          const smoothed = smoothMeasurements(rawMeasurements);\n          if (measurementHistoryRef.current.length >= 10) {\n            console.log(\"Final Measurements:\", smoothed);\n            onMeasurement(smoothed);\n            setHasSent(true);\n          }\n        }\n      }\n\n      animationFrame = requestAnimationFrame(runDetection);\n    };\n\n    if (poseLandmarker) {\n      animationFrame = requestAnimationFrame(runDetection);\n    }\n    return () => cancelAnimationFrame(animationFrame);\n  }, [poseLandmarker, isMeasuring, isCorrectPose, hasSent]);\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Webcam ref={webcamRef} mirrored style={{ width: \"100%\", zIndex: 1 }} />\n      <canvas ref={canvasRef} style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", zIndex: 2 }} />\n\n      {isLoading && (\n        <div style={{\n          position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\",\n          background: \"rgba(0,0,0,0.6)\", color: \"#fff\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 3\n        }}>\n          <p>Loading model...</p>\n        </div>\n      )}\n\n      {poseMessage && (\n        <div style={{\n          position: \"absolute\", bottom: 10, left: \"50%\", transform: \"translateX(-50%)\",\n          background: \"rgba(0,0,0,0.8)\", color: \"#fff\", padding: \"10px 15px\", borderRadius: \"8px\", fontSize: \"16px\"\n        }}>\n          {poseMessage}\n        </div>\n      )}\n\n      {isCorrectPose && !isMeasuring && (\n        <div style={{\n          position: \"absolute\", bottom: 50, left: \"50%\", transform: \"translateX(-50%)\",\n          background: \"#000\", color: \"#fff\", padding: \"8px 12px\", borderRadius: \"8px\", fontSize: \"16px\"\n        }}>\n          Pose valid! Pengukuran dimulai dalam <b>{5 - poseTimer}</b> detik...\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CameraComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}